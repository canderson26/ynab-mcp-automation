<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budgie - Your AI Budget Companion</title>
    <link rel="stylesheet" href="/src/styles/main.css">
</head>
<body>
    <nav class="sidebar" role="navigation" aria-label="Budget Assistant Navigation">
        <div class="resize-handle" aria-hidden="true"></div>
        
        <!-- Collapse/expand toggle button -->
        <button class="toggle-sidebar" aria-label="Toggle sidebar" aria-expanded="true">
            <span id="toggle-icon" aria-hidden="true">‹</span>
        </button>
        
        <!-- Budget Assistant header at the very top -->
        <header class="sidebar-top">
            <div class="logo" role="banner" style="cursor: pointer;" id="budgie-logo">
                <span style="font-size: 20px;" aria-hidden="true">🐦</span>
                <span class="logo-text">Budgie</span>
            </div>
            <div class="sidebar-nav" role="tablist">
                <button class="nav-item active" role="tab" aria-selected="true" aria-controls="chat-view" aria-label="Chat with Budgie">
                    <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                    </svg>
                </button>
                <button class="nav-item" role="tab" aria-selected="false" aria-controls="chat-history" aria-label="View chat history">
                    <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14,2 14,8 20,8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10,9 9,9 8,9"></polyline>
                    </svg>
                </button>
                <button class="nav-item" role="tab" aria-selected="false" aria-label="Start new chat">
                    <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                        <path d="M12 5v14m7-7H5"/>
                    </svg>
                </button>
            </div>
        </header>
        
        <div class="sidebar-content">
            <!-- Quick Actions Section -->
            <section class="sidebar-actions" aria-labelledby="quick-actions-header">
                <h2 class="sidebar-actions-header" id="quick-actions-header">
                    <span aria-hidden="true">⚡</span> Quick Actions
                </h2>
                <button class="sidebar-action-btn" aria-label="Fund all upcoming bills based on due dates">
                    <div class="sidebar-action-icon" aria-hidden="true">💰</div>
                    <div class="sidebar-action-text">Fund Bills</div>
                </button>
                <button class="sidebar-action-btn" aria-label="Show and categorize unapproved transactions">
                    <div class="sidebar-action-icon" aria-hidden="true">🏷️</div>
                    <div class="sidebar-action-text">Categorize</div>
                </button>
                <button class="sidebar-action-btn" aria-label="Analyze spending patterns and budget performance">
                    <div class="sidebar-action-icon" aria-hidden="true">📊</div>
                    <div class="sidebar-action-text">Analyze Spending</div>
                </button>
                <button class="sidebar-action-btn" aria-label="Move money between categories to rebalance budget">
                    <div class="sidebar-action-icon" aria-hidden="true">🔄</div>
                    <div class="sidebar-action-text">Rebalance</div>
                </button>
            </section>
        </div>
    </nav>
    
    <main class="main-content" role="main">
        <div class="connection-status" role="status" aria-live="polite" aria-label="Connection status">
            <div class="connection-dot" aria-hidden="true"></div>
            <span>Budgie Online</span>
        </div>
        
        <!-- Chat View -->
        <section class="chat-view active" id="chat-view" role="tabpanel" aria-labelledby="chat-tab">
            <div class="chat-messages" role="log" aria-live="polite" aria-label="Chat conversation">
                <!-- Welcome screen - shown when no messages -->
                <div class="welcome-screen">
                    <div class="claude-logo-large" aria-hidden="true">🐦</div>
                    <h1 class="welcome-title">How can I help with your budget?</h1>
                    <p class="welcome-subtitle">I'm Budgie, your friendly AI budget companion with full access to your YNAB data</p>
                    
                    <div class="example-prompts" role="list" aria-label="Example prompts">
                        <button class="example-prompt" role="listitem" aria-label="Fund upcoming bills">
                            <div class="example-prompt-title"><span aria-hidden="true">💰</span> Fund upcoming bills</div>
                            <div class="example-prompt-desc">Automatically allocate money to bills due this month</div>
                        </button>
                        <button class="example-prompt" role="listitem" aria-label="Check category balances">
                            <div class="example-prompt-title"><span aria-hidden="true">📊</span> Check category balances</div>
                            <div class="example-prompt-desc">Review spending and available funds by category</div>
                        </button>
                        <button class="example-prompt" role="listitem" aria-label="Categorize transactions">
                            <div class="example-prompt-title"><span aria-hidden="true">🏷️</span> Categorize transactions</div>
                            <div class="example-prompt-desc">Review and approve recent uncategorized transactions</div>
                        </button>
                        <button class="example-prompt" role="listitem" aria-label="Move money between categories">
                            <div class="example-prompt-title"><span aria-hidden="true">🔄</span> Move money between categories</div>
                            <div class="example-prompt-desc">Transfer funds to cover overspending or new purchases</div>
                        </button>
                        <button class="example-prompt" role="listitem" aria-label="Show spending trends">
                            <div class="example-prompt-title"><span aria-hidden="true">📈</span> Show spending trends</div>
                            <div class="example-prompt-desc">Analyze spending patterns and budget performance</div>
                        </button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Chat History Page -->
        <div class="chat-history-page">
            <div class="chat-history-header">
                <h1 class="chat-history-title">Your chat history</h1>
                <div class="chat-history-count">
                    <span id="chat-count">0</span> conversations
                </div>
            </div>
            <div class="chat-history-list" id="chat-history-items">
                <!-- Chat history items will be populated by JavaScript -->
            </div>
        </div>
        
        <form class="input-area" role="search" aria-label="Chat with Budgie">
            <div class="input-container">
                <div class="input-wrapper">
                    <label for="chat-input" class="sr-only">Ask about your budget</label>
                    <textarea 
                        id="chat-input"
                        class="input-field" 
                        placeholder="Ask about your budget..." 
                        rows="1"
                        aria-label="Type your budget question here"
                        aria-describedby="input-help"
                    ></textarea>
                    <div id="input-help" class="sr-only">
                        Press Enter to send, Shift+Enter for new line
                    </div>
                    <div class="input-actions">
                        <button type="button" class="clear-chat-btn" aria-label="Clear all chat history">
                            <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                <path d="M3 6h18"></path>
                                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                            </svg>
                        </button>
                        <button type="submit" class="send-btn" aria-label="Send message">
                            <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                                <path d="m5 12 7-7v4l7 3-7 3v4l-7-7Z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </main>
    
    <script type="module" src="/src/js/main.js"></script>
</body>
</html>